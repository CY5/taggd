{"version":3,"sources":["taggd.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","numberIsNan","Number","isFinite","val","Infinity","number-is-nan","2","numberIsFinite","isInteger","x","Math","floor","is-finite","3","isNaN","4","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","EventEmitter","ObjectIs","TypeErrorMessage","Tag","_EventEmitter","position","text","buttonAttributes","arguments","undefined","popupAttributes","this","ofType","Array","isArray","getObjectMessage","_this","getPrototypeOf","buttonElement","document","createElement","classList","add","popupElement","appendChild","isControlsEnabled","inputLabelElement","buttonSaveElement","buttonDeleteElement","buttonSaveElementClickHandler","setText","buttonDeleteElementClickHandler","emit","setButtonAttributes","setPopupAttributes","setPosition","y","hide","isCanceled","style","display","getMessage","type","innerHTML","number","getFloatMessage","positionStyle","getPositionStyle","left","top","attributes","setElementAttributes","LABEL_BUTTON_SAVE","LABEL_BUTTON_DELETE","addEventListener","getAttributes","rawAttributes","forEach","attribute","name","parseFloat","element","getAttribute","classValue","setAttribute","object","LABEL_NEW_TAG","./util/event-emitter","./util/object-is","./util/type-error-message","5","_extends","assign","source","hasOwnProperty","Taggd","image","options","data","Element","wrapper","parentElement","insertBefore","removeChild","tags","imageClickHandler","clientX","width","clientY","height","tag","enableControls","addTag","setOptions","setTags","DEFAULT_OPTIONS","_this2","ofInstance","getTagMessage","show","once","tagIndex","indexOf","deleteTag","onAnything","eventName","_len","args","_key","apply","concat","push","index","getIntegerMessage","splice","deleteTags","addTags","_this3","getArrayMessage","slice","callback","getFunctionMessage","map","getTags","removeEventListener","disableControls","window","./Tag","number-is-integer","6","EVENT_WILDCARD","handlers","handler","on","handlerIndex","off","eventHandler","returnValue","7","_typeof","Symbol","iterator","obj","function","8","expectedType","getTypeErrorMessage","message"],"mappings":"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","file":"taggd.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\nvar numberIsNan = require('number-is-nan');\n\nmodule.exports = Number.isFinite || function (val) {\n\treturn !(typeof val !== 'number' || numberIsNan(val) || val === Infinity || val === -Infinity);\n};\n\n},{\"number-is-nan\":3}],2:[function(require,module,exports){\n'use strict';\nvar numberIsFinite = require('is-finite');\n\nmodule.exports = Number.isInteger || function (x) {\n\treturn numberIsFinite(x) && Math.floor(x) === x;\n};\n\n},{\"is-finite\":1}],3:[function(require,module,exports){\n'use strict';\nmodule.exports = Number.isNaN || function (x) {\n\treturn x !== x;\n};\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EventEmitter = require('./util/event-emitter');\nvar ObjectIs = require('./util/object-is');\nvar TypeErrorMessage = require('./util/type-error-message');\n\nvar Tag = function (_EventEmitter) {\n  _inherits(Tag, _EventEmitter);\n\n  /**\n   * Create a new Tag instance\n   * @param {{ x: Number, y: Number }} position - The tag’s coordinates\n   * @param {String|Function} text - The tag’s content\n   * @param {Object} buttonAttributes = {} - The button’s attributes\n   * @param {Object} popupAttributes = {} - The popup’s attributes\n   */\n\n  function Tag(position, text) {\n    var buttonAttributes = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n    var popupAttributes = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n    _classCallCheck(this, Tag);\n\n    if (!ObjectIs.ofType(position, 'object') || Array.isArray(position)) {\n      throw new TypeError(TypeErrorMessage.getObjectMessage(position));\n    } else if (!'x' in position || !'y' in position) {\n      throw new Error(position + ' should have x and y property');\n    }\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Tag).call(this));\n\n    _this.buttonElement = document.createElement('button');\n    _this.buttonElement.classList.add('taggd__button');\n\n    _this.popupElement = document.createElement('span');\n    _this.popupElement.classList.add('taggd__popup');\n\n    _this.buttonElement.appendChild(_this.popupElement);\n\n    _this.isControlsEnabled = false;\n    _this.inputLabelElement = undefined;\n    _this.buttonSaveElement = undefined;\n    _this.buttonDeleteElement = undefined;\n\n    _this.buttonSaveElementClickHandler = function () {\n      return _this.setText(_this.inputLabelElement.value);\n    };\n    _this.buttonDeleteElementClickHandler = function () {\n      _this.emit('taggd.tag.delete', _this);\n    };\n\n    _this.text = undefined;\n\n    _this.setButtonAttributes(buttonAttributes);\n    _this.setPopupAttributes(popupAttributes);\n    _this.setPosition(position.x, position.y);\n    _this.setText(text);\n\n    _this.hide();\n    return _this;\n  }\n\n  /**\n   * Show the tag\n   * @return {Taggd.Tag} Current Tag\n   */\n\n\n  _createClass(Tag, [{\n    key: 'show',\n    value: function show() {\n      var isCanceled = !this.emit('taggd.tag.show', this);\n\n      if (!isCanceled) {\n        this.popupElement.style.display = '';\n        this.emit('taggd.tag.shown', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Hide the tag\n     * @return {Taggd.Tag} Current Tag\n     */\n\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var isCanceled = !this.emit('taggd.tag.hide', this);\n\n      if (!isCanceled) {\n        this.popupElement.style.display = 'none';\n        this.emit('taggd.tag.hidden', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Set the tag’s text\n     * @param {String|Function} text - The tag’s content\n     * @return {Taggd.Tag} Current Tag\n     */\n\n  }, {\n    key: 'setText',\n    value: function setText(text) {\n      if (!ObjectIs.ofType(text, 'string') && !ObjectIs.function(text)) {\n        throw new TypeError(TypeErrorMessage.getMessage(type, 'a string or a function'));\n      }\n\n      var isCanceled = !this.emit('taggd.tag.change', this);\n\n      if (!isCanceled) {\n        if (ObjectIs.function(text)) {\n          this.text = text(this);\n        } else {\n          this.text = text;\n        }\n\n        if (!this.isControlsEnabled) {\n          this.popupElement.innerHTML = this.text;\n        } else {\n          this.inputLabelElement.value = this.text;\n        }\n\n        this.emit('taggd.tag.changed', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Set the tag’s position\n     * @param {Number} x - The tag’s x-coordinate\n     * @param {Number} y - The tag’s y-coordinate\n     * @return {Taggd.Tag} Current Tag\n     */\n\n  }, {\n    key: 'setPosition',\n    value: function setPosition(x, y) {\n      if (!ObjectIs.number(x)) {\n        throw new TypeError(TypeErrorMessage.getFloatMessage(x));\n      }\n      if (!ObjectIs.number(y)) {\n        throw new TypeError(TypeErrorMessage.getFloatMessage(y));\n      }\n\n      var isCanceled = !this.emit('taggd.tag.change', this);\n\n      if (!isCanceled) {\n        var positionStyle = Tag.getPositionStyle(x, y);\n\n        this.buttonElement.style.left = positionStyle.left;\n        this.buttonElement.style.top = positionStyle.top;\n\n        this.emit('taggd.tag.changed', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Set the tag button’s attributes\n     * @param {Object} atttributes - The attributes to set\n     * @return {Taggd.Tag} Current tag\n     */\n\n  }, {\n    key: 'setButtonAttributes',\n    value: function setButtonAttributes() {\n      var attributes = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      if (!ObjectIs.ofType(attributes, 'object') || Array.isArray(attributes)) {\n        throw new TypeError(TypeErrorMessage.getObjectMessage(attributes));\n      }\n\n      var isCanceled = !this.emit('taggd.tag.change', this);\n\n      if (!isCanceled) {\n        Tag.setElementAttributes(this.buttonElement, attributes);\n        this.emit('taggd.tag.changed', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Set the tag popup’s attributes\n     * @param {Object} atttributes - The attributes to set\n     * @return {Taggd.Tag} Current tag\n     */\n\n  }, {\n    key: 'setPopupAttributes',\n    value: function setPopupAttributes() {\n      var attributes = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      if (!ObjectIs.ofType(attributes, 'object') || Array.isArray(attributes)) {\n        throw new TypeError(TypeErrorMessage.getObjectMessage(attributes));\n      }\n\n      var isCanceled = !this.emit('taggd.tag.change', this);\n\n      if (!isCanceled) {\n        Tag.setElementAttributes(this.popupElement, attributes);\n        this.emit('taggd.tag.changed', this);\n      }\n\n      return this;\n    }\n\n    /**\n     * Enables the tag controls\n     * @return {Taggd.Tag} Current tag\n     */\n\n  }, {\n    key: 'enableControls',\n    value: function enableControls() {\n      this.isControlsEnabled = true;\n\n      this.inputLabelElement = document.createElement('input');\n      this.buttonSaveElement = document.createElement('button');\n      this.buttonDeleteElement = document.createElement('button');\n\n      this.inputLabelElement.classList.add('taggd__editor-input');\n      this.buttonSaveElement.classList.add('taggd__editor-button', 'taggd__editor-button--save');\n      this.buttonDeleteElement.classList.add('taggd__editor-button', 'taggd__editor-button--delete');\n\n      this.buttonSaveElement.innerHTML = Tag.LABEL_BUTTON_SAVE;\n      this.buttonDeleteElement.innerHTML = Tag.LABEL_BUTTON_DELETE;\n\n      this.buttonSaveElement.addEventListener('click', this.buttonSaveElementClickHandler);\n      this.buttonDeleteElement.addEventListener('click', this.buttonDeleteElementClickHandler);\n\n      this.popupElement.innerHTML = '';\n      this.popupElement.appendChild(this.inputLabelElement);\n      this.popupElement.appendChild(this.buttonSaveElement);\n      this.popupElement.appendChild(this.buttonDeleteElement);\n\n      // Set input content\n      this.setText(this.text);\n      return this;\n    }\n\n    /**\n     * Disabled the tag controls\n     * @return {Taggd.Tag} Current tag\n     */\n\n  }, {\n    key: 'disableControls',\n    value: function disableControls() {\n      this.isControlsEnabled = false;\n\n      this.inputLabelElement = undefined;\n      this.buttonSaveElement = undefined;\n      this.buttonDeleteElement = undefined;\n\n      // Remove elements and set set content\n      this.setText(this.text);\n      return this;\n    }\n\n    /**\n     * Get a Taggd.createFromObject-compatible object\n     * @return {Object} A object for JSON\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      function getAttributes(rawAttributes) {\n        var attributes = {};\n\n        Array.prototype.forEach.call(rawAttributes, function (attribute) {\n          if (attribute.name === 'class' || attribute.name === 'style') {\n            return;\n          }\n\n          attributes[attribute.name] = attribute.value;\n        });\n\n        return attributes;\n      }\n\n      return {\n        position: {\n          x: parseFloat(this.buttonElement.style.left) / 100,\n          y: parseFloat(this.buttonElement.style.left) / 100\n        },\n        text: this.text,\n        buttonAttributes: getAttributes(this.buttonElement.attributes),\n        popupAttributes: getAttributes(this.popupElement.attributes)\n      };\n    }\n\n    /**\n     * Set element attributes\n     * @param {DomNode} element - The element the attributes should be set to\n     * @param {Object} attributes = {} - A map of attributes to set\n     * @return {DomNode} The original element\n     */\n\n  }], [{\n    key: 'setElementAttributes',\n    value: function setElementAttributes(element) {\n      var attributes = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!ObjectIs.ofType(attributes, 'object') || Array.isArray(attributes)) {\n        throw new TypeError(TypeErrorMessage.getObjectMessage(attributes));\n      }\n\n      for (var attribute in attributes) {\n        var value = attributes[attribute];\n\n        if (attribute === 'class' && element.getAttribute(attribute)) {\n          var classValue = element.getAttribute(attribute) + (' ' + value);\n          element.setAttribute(attribute, classValue);\n          continue;\n        }\n\n        element.setAttribute(attribute, value);\n      }\n\n      return element;\n    }\n\n    /**\n     * Get the position style\n     * @param {Number} x - The tag’s x-coordinate\n     * @param {Number} y - The tag’s y-coordinate\n     * @return {Object} The style\n     */\n\n  }, {\n    key: 'getPositionStyle',\n    value: function getPositionStyle(x, y) {\n      if (!ObjectIs.number(x)) {\n        throw new TypeError(TypeErrorMessage.getFloatMessage(x));\n      }\n      if (!ObjectIs.number(y)) {\n        throw new TypeError(TypeErrorMessage.getFloatMessage(y));\n      }\n\n      return {\n        left: x * 100 + '%',\n        top: y * 100 + '%'\n      };\n    }\n\n    /**\n     * Create a tag from object\n     * @param {Object} object - The object containing all information\n     * @return {Tag} The created Tag instance\n     */\n\n  }, {\n    key: 'createFromObject',\n    value: function createFromObject(object) {\n      return new Tag(object.position, object.text, object.buttonAttributes, object.popupAttributes);\n    }\n  }]);\n\n  return Tag;\n}(EventEmitter);\n\nTag.LABEL_NEW_TAG = 'New tag';\nTag.LABEL_BUTTON_SAVE = 'save';\nTag.LABEL_BUTTON_DELETE = 'delete';\n\nmodule.exports = Tag;\n\n},{\"./util/event-emitter\":6,\"./util/object-is\":7,\"./util/type-error-message\":8}],5:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Tag = require('./Tag');\nvar EventEmitter = require('./util/event-emitter');\nvar ObjectIs = require('./util/object-is');\nvar TypeErrorMessage = require('./util/type-error-message');\n\nNumber.isInteger = Number.isInteger || require('number-is-integer');\n\nvar Taggd = function (_EventEmitter) {\n  _inherits(Taggd, _EventEmitter);\n\n  /**\n   * Create a new taggd instance\n   * @param {HTMLElement} image - The image to wrap\n   * @param {Object} options = {} - The options\n   * @param {Array} data = [] - The tags\n   */\n\n  function Taggd(image) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n    var data = arguments.length <= 2 || arguments[2] === undefined ? [] : arguments[2];\n\n    _classCallCheck(this, Taggd);\n\n    if (!image instanceof Element) {\n      throw new TypeError(TypeErrorMessage.getMessage(image, Element));\n    }\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Taggd).call(this));\n\n    _this.wrapper = document.createElement('div');\n    _this.wrapper.classList.add('taggd');\n\n    image.classList.add('taggd__image');\n\n    image.parentElement.insertBefore(_this.wrapper, image);\n    image.parentElement.removeChild(image);\n    _this.wrapper.appendChild(image);\n\n    _this.image = image;\n    _this.options = {};\n    _this.tags = [];\n\n    _this.imageClickHandler = function (e) {\n      var position = {\n        x: e.clientX / _this.image.width,\n        y: e.clientY / _this.image.height\n      };\n\n      var tag = new Tag(position, Tag.LABEL_NEW_TAG);\n      tag.enableControls();\n\n      _this.addTag(tag);\n    };\n\n    _this.setOptions(options);\n    _this.setTags(data);\n    return _this;\n  }\n\n  /**\n   * Set taggd options\n   * @param {Object} options - The options to set\n   * @return {Taggd} Current Taggd instance\n   */\n\n\n  _createClass(Taggd, [{\n    key: 'setOptions',\n    value: function setOptions(options) {\n      if (!ObjectIs.ofType(options, 'object') || Array.isArray(options)) {\n        throw new TypeError(TypeErrorMessage.getObjectMessage(tag));\n      }\n\n      this.options = _extends(this.options, Taggd.DEFAULT_OPTIONS, options);\n      return this;\n    }\n\n    /**\n     * Add a single tag\n     * @param {Taggd.Tag} tag - The tag to add\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'addTag',\n    value: function addTag(tag) {\n      var _this2 = this;\n\n      if (!ObjectIs.ofInstance(tag, Tag)) {\n        throw new TypeError(TypeErrorMessage.getTagMessage(tag));\n      }\n\n      var isCanceled = !this.emit('taggd.tag.add', this, tag);\n\n      if (!isCanceled) {\n        // Add events to show/hide tags\n        tag.buttonElement.addEventListener(this.options.show, function () {\n          return tag.show();\n        });\n        tag.buttonElement.addEventListener(this.options.hide, function () {\n          return tag.hide();\n        });\n\n        tag.once('taggd.tag.delete', function (tag) {\n          var tagIndex = _this2.tags.indexOf(tag);\n\n          if (tagIndex >= 0) {\n            _this2.deleteTag(tagIndex);\n          }\n        });\n\n        // Route all tag events through taggd instance\n        tag.onAnything(function (eventName) {\n          for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [eventName, _this2].concat(args));\n        });\n\n        this.tags.push(tag);\n        this.wrapper.appendChild(tag.buttonElement);\n\n        this.emit('taggd.tag.added', this, tag);\n      }\n\n      return this;\n    }\n\n    /**\n     * Get a single tag by index\n     * @param  {Number} index - The index of the desired tag\n     * @return {Taggd.Tag} The tag to get\n     */\n\n  }, {\n    key: 'getTag',\n    value: function getTag(index) {\n      if (!Number.isInteger(index)) {\n        throw new TypeError(TypeErrorMessage.getIntegerMessage(index));\n      }\n\n      return this.tags[index];\n    }\n\n    /**\n     * Delete a single tag by index\n     * @param {Number} index - The index of the desired tag\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'deleteTag',\n    value: function deleteTag(index) {\n      if (!Number.isInteger(index)) {\n        throw new TypeError(TypeErrorMessage.getIntegerMessage(index));\n      }\n\n      if (!this.tags[index]) {\n        throw new Error('Tag at index ' + index + ' does not exist.');\n      }\n\n      var tag = this.tags[index];\n      var isCanceled = !this.emit('taggd.tag.delete', this, tag);\n\n      if (!isCanceled) {\n        this.wrapper.removeChild(tag.buttonElement);\n        this.tags.splice(index, 1);\n\n        this.emit('taggd.tag.deleted', this, tag);\n      }\n\n      return this;\n    }\n\n    /**\n     * Set all tags\n     * @param {Taggd.Tag[]} tags An array of tags\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'setTags',\n    value: function setTags(tags) {\n      this.deleteTags();\n      this.addTags(tags);\n      return this;\n    }\n\n    /**\n     * Add multiple tags\n     * @param {Taggd.Tag[]} tags - An array of tags\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'addTags',\n    value: function addTags(tags) {\n      var _this3 = this;\n\n      if (!Array.isArray(tags)) {\n        throw new TypeError(TypeErrorMessage.getArrayMessage(tags, 'Taggd.Tag'));\n      }\n\n      tags.forEach(function (tag) {\n        return _this3.addTag(tag);\n      });\n      return this;\n    }\n\n    /**\n     * Get all tags\n     * @return {Taggd.Tag[]} All tags of this Taggd instance\n     */\n\n  }, {\n    key: 'getTags',\n    value: function getTags() {\n      return this.tags;\n    }\n\n    /**\n     * Remove all tags\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'deleteTags',\n    value: function deleteTags() {\n      this.tags.slice(0, this.tags.length);\n      return this;\n    }\n\n    /**\n     * Iterate and replace all tags\n     * @param {Function} callback - The callback to execute for all tags\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'map',\n    value: function map(callback) {\n      if (!ObjectIs.function(callback)) {\n        throw new TypeError(TypeErrorMessage.getFunctionMessage(callback));\n      }\n\n      this.tags = this.tags.map(callback);\n      return this;\n    }\n\n    /**\n     * Clean up memory\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var isCanceled = !this.emit('taggd.destroy', this);\n\n      if (!isCanceled) {\n        this.deleteTags();\n      }\n\n      return this;\n    }\n\n    /**\n     * Enable editor mode\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'enableEditorMode',\n    value: function enableEditorMode() {\n      var isCanceled = !this.emit('taggd.editor.enable', this);\n\n      if (!isCanceled) {\n        this.image.addEventListener('click', this.imageClickHandler);\n        this.getTags().forEach(function (tag) {\n          return tag.enableControls();\n        });\n      }\n\n      return this;\n    }\n\n    /**\n     * Disable editor mode\n     * @return {Taggd} Current Taggd instance\n     */\n\n  }, {\n    key: 'disableEditorMode',\n    value: function disableEditorMode() {\n      var isCanceled = !this.emit('taggd.editor.disable', this);\n\n      if (!isCanceled) {\n        this.image.removeEventListener('click', this.imageClickHandler);\n        this.getTags().forEach(function (tag) {\n          return tag.disableControls();\n        });\n      }\n\n      return this;\n    }\n  }]);\n\n  return Taggd;\n}(EventEmitter);\n\n/**\n * Default options for all Taggd instances\n * @type {Object}\n */\n\n\nTaggd.DEFAULT_OPTIONS = {\n  show: 'mouseenter',\n  hide: 'mouseleave'\n};\n\nmodule.exports = Taggd;\nmodule.exports.Tag = Tag;\n\nwindow.Taggd = module.exports;\n\n},{\"./Tag\":4,\"./util/event-emitter\":6,\"./util/object-is\":7,\"./util/type-error-message\":8,\"number-is-integer\":2}],6:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EVENT_WILDCARD = '*';\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.handlers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: 'onAnything',\n    value: function onAnything(handler) {\n      this.on(EVENT_WILDCARD, handler);\n    }\n  }, {\n    key: 'on',\n    value: function on(eventName, handler) {\n      if (!this.handlers[eventName]) {\n        this.handlers[eventName] = [];\n      }\n\n      this.handlers[eventName].push(handler);\n    }\n  }, {\n    key: 'off',\n    value: function off(eventName, handler) {\n      if (!this.handlers[eventName]) return;\n\n      var handlerIndex = this.handlers[eventName].indexOf(handler);\n\n      if (handlerIndex >= 0) {\n        this.handlers[eventName].splice(handlerIndex, 1);\n      }\n    }\n  }, {\n    key: 'once',\n    value: function once(eventName, handler) {\n      var _this = this;\n\n      this.on(eventName, function () {\n        handler.apply(undefined, arguments);\n        _this.off(eventName, handler);\n      });\n    }\n  }, {\n    key: 'emit',\n    value: function emit(eventName) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var isCanceled = false;\n\n      if (this.handlers[EVENT_WILDCARD]) {\n        this.handlers[EVENT_WILDCARD].forEach(function (eventHandler) {\n          var returnValue = eventHandler.apply(undefined, [eventName].concat(args));\n          isCanceled = returnValue !== undefined && !returnValue || isCanceled;\n        });\n      }\n\n      if (this.handlers[eventName]) {\n        this.handlers[eventName].forEach(function (eventHandler) {\n          var returnValue = eventHandler.apply(undefined, args);\n          isCanceled = returnValue !== undefined && !returnValue || isCanceled;\n        });\n      }\n\n      return !isCanceled;\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nmodule.exports = EventEmitter;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nmodule.exports = {\n  /**\n   * Check wheter an object is an instance of type\n   * @param {Object} object - The object to test\n   * @param {Object} type - The class to test\n   * @return {Boolean}\n   */\n  ofInstance: function ofInstance(object, type) {\n    return object instanceof type;\n  },\n\n  /**\n   * Check whether an object is equals to given type\n   * @param {Object} object - The object to test\n   * @param {String} type - The type to test\n   * @return {Boolean}\n   */\n  ofType: function ofType(object, type) {\n    return (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === type;\n  },\n\n  /**\n   * Check whether given object is a function\n   * @param {Object} object - The object to test\n   * @return {Boolean}\n   */\n  function: function _function(object) {\n    return typeof object === 'function';\n  },\n\n  /**\n   * Check whether given object is a Number\n   * @param {Object} object - The object to test\n   * @return {Boolean}\n   */\n  number: function number(object) {\n    return !isNaN(parseFloat(object));\n  }\n};\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar TypeErrorMessage = {\n  /**\n   * Get the TypeError message\n   * @param {Object} object - The tested object\n   * @param {String} expectedType - A string describing the expected type\n   * @return {String} The error message\n   */\n  getMessage: function getMessage(object, expectedType) {\n    return object + ' should be ' + expectedType;\n  },\n\n  /**\n   * Get the TypeError Array message\n   * @param {Object} object - The tested object\n   * @param {String} expectedType - The expected type of all array items\n   * @return {String} The error message\n   */\n  getArrayMessage: function getArrayMessage(object, expectedType) {\n    if (expectedType) {\n      return this.getTypeErrorMessage(object, 'an array of ' + expectedType);\n    }\n    return this.getTypeErrorMessage(object, 'an array');\n  },\n\n  /**\n   * Get the TypeError Function message\n   * @param {Object} object - The tested object\n   * @return {String} The error message\n   */\n  getFunctionMessage: function getFunctionMessage(object) {\n    return this.getTypeErrorMessage(object, 'a function');\n  },\n\n  /**\n   * Get the TypeError Integer message\n   * @param {Object} object - The tested object\n   * @return {String} The error message\n   */\n  getIntegerMessage: function getIntegerMessage(object) {\n    return this.getTypeErrorMessage(object, 'an integer');\n  },\n\n  /**\n   * Get the TypeError Float message\n   * @param {Object} object - The tested object\n   * @return {String} The error message\n   */\n  getFloatMessage: function getFloatMessage(object) {\n    return this.getTypeErrorMessage(object, 'a floating number');\n  },\n\n  /**\n   * Get the TypeError Object message\n   * @param {Object} object - The tested object\n   * @return {String} The error message\n   */\n  getObjectMessage: function getObjectMessage(object) {\n    return this.getTypeErrorMessage(object, 'an object');\n  },\n\n  /**\n   * Get the TypeError Taggd.Tag message\n   * @param {Object} object - The tested object\n   * @return {String} The error message\n   */\n  getTagMessage: function getTagMessage(object) {\n    return this.getTypeErrorMessage(object, 'a tag');\n  },\n\n  /**\n   * Get TypeError message\n   * @param {Object} object - The tested object\n   * @param {String} message - The type message\n   * @return {String} The error message\n   */\n  getTypeErrorMessage: function getTypeErrorMessage(object, message) {\n    return object + ' is not a ' + message;\n  }\n};\n\nmodule.exports = TypeErrorMessage;\n\n},{}]},{},[5]);\n"],"sourceRoot":"/source/"}