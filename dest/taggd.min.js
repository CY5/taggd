!function t(e,n,r){function i(s,o){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var g=new Error("Cannot find module '"+s+"'");throw g.code="MODULE_NOT_FOUND",g}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";var r=t("number-is-nan");e.exports=Number.isFinite||function(t){return!("number"!=typeof t||r(t)||t===1/0||t===-(1/0))}},{"number-is-nan":3}],2:[function(t,e,n){"use strict";var r=t("is-finite");e.exports=Number.isInteger||function(t){return r(t)&&Math.floor(t)===t}},{"is-finite":1}],3:[function(t,e,n){"use strict";e.exports=Number.isNaN||function(t){return t!==t}},{}],4:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./util/event-factory"),s=t("./util/object-is"),o=t("./util/type-error-message"),u=function(){function t(e,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];r(this,t),this.buttonElement=document.createElement("button"),this.popupElement=document.createElement("span"),this.setButtonAttributes(i),this.setPopupAttributes(a),this.setPosition(e.x,e.y),this.setText(n),this.hide()}return i(t,[{key:"show",value:function(){var t=a.createCancelableTagEvent("taggd.tag.show",this),e=!this.popupElement.dispatchEvent(t);if(!e){this.popupElement.style.display="";var n=a.createTagEvent("taggd.tag.shown",this);this.popupElement.dispatchEvent(n)}return this}},{key:"hide",value:function(){var t=a.createCancelableTagEvent("taggd.tag.hide",this),e=!this.popupElement.dispatchEvent(t);if(!e){this.popupElement.style.display="none";var n=a.createTagEvent("taggd.tag.hidden",this);this.popupElement.dispatchEvent(n)}return this}},{key:"setText",value:function(t){if(!s.ofType(t,"string")&&s["function"](t))throw new Error(o.getMessage(type,"a string or a function"));var e=a.createCancelableTagEvent("taggd.tag.change",this),n=!this.popupElement.dispatchEvent(e);if(!n){s["function"](t)?this.popupElement.innerHTML=t(this):this.popupElement.innerHTML=t;var r=a.createTagEvent("taggd.tag.changed",this);this.popupElement.dispatchEvent(r)}return this}},{key:"setPosition",value:function(e,n){if(!s.number(e))throw new Error(o.getIntegerMessage(e));if(!s.number(n))throw new Error(o.getIntegerMessage(n));var r=a.createCancelableTagEvent("taggd.tag.change",this),i=!this.popupElement.dispatchEvent(r);if(!i){var u=t.getPositionStyle(e,n);this.popupElement.style.left=u.left,this.popupElement.style.top=u.top;var g=a.createTagEvent("taggd.tag.changed",this);this.popupElement.dispatchEvent(g)}return this}},{key:"setButtonAttributes",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.createCancelableTagEvent("taggd.tag.change",this),r=!this.buttonElement.dispatchEvent(n);if(!r){t.setElementAttributes(this.buttonElement,e);var i=a.createTagEvent("taggd.tag.changed",this);this.buttonElement.dispatchEvent(i)}return this}},{key:"setPopupAttributes",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.createCancelableTagEvent("taggd.tag.change",this),r=!this.popupElement.dispatchEvent(n);if(!r){t.setElementAttributes(this.popupElement,e);var i=a.createTagEvent("taggd.tag.changed",this);this.popupElement.dispatchEvent(i)}return this}}],[{key:"setElementAttributes",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!s.ofType(e,"object"))throw new Error(o.getObjectMessage(e));for(var n in e){var r=e[n];if("class"===n&&t.getAttribute(n)){var i=t.getAttribute(n)+(" "+r);t.setAttribute(n,i)}else t.setAttribute(n,r)}return t}},{key:"getPositionStyle",value:function(t,e){return{left:100*t+"%",top:100*e+"%"}}},{key:"createFromObject",value:function(e){return new t(e.position,e.text,e.buttonAttributes,e.popupAttributes)}}]),t}();e.exports=u},{"./util/event-factory":6,"./util/object-is":7,"./util/type-error-message":8}],5:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./Tag"),o=t("./util/event-factory"),u=t("./util/object-is"),g=t("./util/type-error-message");Number.isInteger=Number.isInteger||t("number-is-integer");var c=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];r(this,t),this.wrapper=document.createElement("div"),this.wrapper.classList.add("taggd"),this.wrapper.insertBefore(e),e.parentElement.removeChild(e),this.wrapper.appendChild(e),this.image=e,this.tags=[],this.setOptions(n),this.setTags(i);var a=o.createTaggdEvent("taggd.init",this);this.image.dispatchEvent(a)}return a(t,[{key:"setOptions",value:function(e){if(!u.ofType(e,"object"))throw new TypeError(g.getObjectMessage(tag));this.options=i({},t.DEFAULT_OPTIONS,e)}},{key:"addTag",value:function(t){if(!u.ofInstance(t,s))throw new TypeError(g.getTagMessage(t));var e=o.createCancelableTaggdEvent("taggd.tag.add",this,t),n=!this.image.dispatchEvent(e);if(!n){t.buttonElement.addEventListener(this.options.show,function(){return t.show()}),t.buttonElement.addEventListener(this.options.hide,function(){return t.hide()}),this.tags.push(t),this.wrapper.appendChild(t.buttonElement),this.wrapper.appendChild(t.popupElement);var r=o.createTaggdEvent("taggd.tag.added",this,t);this.image.dispatchEvent(r)}return this}},{key:"getTag",value:function(t){if(!Number.isInteger(t))throw new TypeError(g.getIntegerMessage(t));return this.tags[t]}},{key:"deleteTag",value:function(t){if(!Number.isInteger(t))throw new TypeError(g.getIntegerMessage(t));if(!this.tags[t])throw new Error("Tag at index "+t+" does not exist.");var e=this.tags[t],n=o.createCancelableTaggdEvent("taggd.tag.delete",this,e),r=!this.image.dispatchEvent(n);if(!r){this.wrapper.removeChild(e.buttonElement),this.wrapper.removeChild(e.popupElement),this.tags.splice(e,1);var i=o.createTaggdEvent("taggd.tag.deleted",this,e);this.image.dispatchEvent(i)}return this}},{key:"setTags",value:function(t){return this.deleteTags(),this.addTags(t),this}},{key:"addTags",value:function(t){var e=this;if(!Array.isArray(t))throw new TypeError(g.getArrayMessage(t,"Taggd.Tag"));return t.forEach(function(t){return e.addTag(t)}),this}},{key:"getTags",value:function(){return this.tags}},{key:"deleteTags",value:function(){return this.tags.slice(0,this.tags.length),this}},{key:"map",value:function(t){if(!u["function"](t))throw new TypeError(g.getFunctionMessage(t));return this.tags=this.tags.map(t),this}},{key:"destroy",value:function(){var t=o.createTaggdEvent("taggd.destroy",this),e=!this.image.dispatchEvent(t);e||this.deleteTags()}},{key:"enableEditorMode",value:function(){var t=o.createTaggdEvent("taggd.editor.enable",this);!this.image.dispatchEvent(t)}},{key:"disableEditorMode",value:function(){var t=o.createTaggdEvent("taggd.editor.disable",this);!this.image.dispatchEvent(t)}}]),t}();c.DEFAULT_OPTIONS={show:"mouseenter",hide:"mouseleave"},e.exports=c,e.exports.Tag=s,window.Taggd=e.exports},{"./Tag":4,"./util/event-factory":6,"./util/object-is":7,"./util/type-error-message":8,"number-is-integer":2}],6:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){r(this,t)}return i(t,null,[{key:"createTaggdEvent",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],r={taggd:e};return n&&(r.tag=n),new CustomEvent(t,{bubbles:!0,detail:r})}},{key:"createCancelableTaggdEvent",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],r={taggd:e};return n&&(r.tag=n),new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r})}},{key:"createTagEvent",value:function(t,e){return new CustomEvent(t,{bubbles:!0,detail:{tag:e}})}},{key:"createCancelableTagEvent",value:function(t,e){return new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:{tag:e}})}}]),t}();e.exports=a},{}],7:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.exports={ofInstance:function(t,e){return t instanceof e},ofType:function(t,e){return("undefined"==typeof t?"undefined":r(t))===e},"function":function(t){return"function"==typeof t},number:function(t){return!isNaN(parseFloat(t))}}},{}],8:[function(t,e,n){"use strict";var r={getMessage:function(t,e){return t+" should be "+e},getArrayMessage:function(t,e){return e?this.getTypeErrorMessage(t,"an array of "+e):this.getTypeErrorMessage(t,"an array")},getFunctionMessage:function(t){return this.getTypeErrorMessage(t,"a function")},getIntegerMessage:function(t){return this.getTypeErrorMessage(t,"an integer")},getObjectMessage:function(t){return this.getTypeErrorMessage(t,"an object")},getTagMessage:function(t){return this.getTypeErrorMessage(t,"a tag")},getTypeErrorMessage:function(t,e){return t+" is not a "+e}};e.exports=r},{}]},{},[5]);
//# sourceMappingURL=taggd.min.js.map
